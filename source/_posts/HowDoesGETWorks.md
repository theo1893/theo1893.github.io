---
title: Redis源码图解(17) 我们在客户端使用GET命令, 直到服务端返回, 发生了什么(单机)
date: 2024-08-21 16:02:59
categories:
- Tech
tags:
- redis

---

# 一条GET指令的处理流程

本节采用和上一节相同的设置, 单机模式, 打开多线程读和多线程写.

整体框架和上一节一致, 不进行赘述, 区别仅在于GET指令流程.

## GET指令流程

Get流程指令非常简单, 根据指定的key查询数据返回.

当我们使用

```shell
GET k1
```

获取k1的值时, Redis首先会查询k1对应的数据存储, 然后查询k1对应的过期存储:

1. 如果k1没有过期时间, 或者未过期, 则正常返回;
2. 否则, 删除k1的数据存储和过期存储(惰性过期机制, Lazy Expire);

## 全流程图示意图

![](process_get_command.png)
